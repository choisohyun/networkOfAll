# 4장[초급편] 데이터 링크 계층 : 랜에서 데이터 전송하기
> 네트워크의 구조 이해하기

## 목표
- 이더넷
- CSMA/CD
- MAC 주소
- 스위치
- 충돌 도메인

## 데이터 링크 계층의 역할과 이더넷
> **데이터 링크 계층** : 랜에서 데이터를 주고받기 위해 필요  
> 네트워크 장비 간 신호 송수신을 위한 규칙을 정하는 계층

### 이더넷
- 데이터 링크 계층 규칙들 중 일반적으로 가장 많이 사용되는 규칙
- 여러 컴퓨터가 동시에 데이터를 전송해도 `충돌`이 일어나지 않는 구조
- 데이터가 동시에 전송되면 보내는 시점을 늦춤(CSMA/CD)

#### 충돌 (collision)
- 데이터가 동시에 케이블을 지나가면서 부딪히는 것

#### CSMA/CD
- 반송파 감지 다중 접속 및 충돌 탐지
- 이더넷에서 시점을 늦추는 방법
- **CS** : 데이터를 보내려고 하는 컴퓨터가 케이블에 신호가 흐르고 있는지 확인하는 규칙
- **MA** : 케이블에 데이터가 흐르고 있지 않으면 데이터를 보내도 된다는 규칙
- **CD** : 충돌이 발생하고 있는지 확인하는 규칙
- 효율이 좋지 않아 거의 사용하지 않음

## MAC 주소의 구조
### MAC 주소
- Media Access Control Address(물리 주소)
- 전 세계에서 유일한 번호로 할당
- 중복되지 않도록 규칙이 정해져 있음  

**`앞 24비트`** : 랜 카드를 만든 제조사 번호  
**`뒤 24비트`** : 제조사가 붙인 일련번호

### 이더넷 헤더 구조
**6바이트** : 목적지의 MAC 주소(목적지 주소가 다르면 데이터 파기)  
**6바이트** : 출발지의 MAC 주소  
**2바이트** : 유형(이더넷으로 전송되는 상위 계층 프로토콜의 종류)

### 트레일러
- FCS(Frame Check Sequence)
- 데이터 전송 도중 오류 발생 확인

### 프레임
이더넷 헤더 + 트레일러  

> 네트워크를 통해 프레임이 전송됨


## 스위치의 구조

### 스위치
- 레이어 2 스위치, 스위칭 허브
- 허브와 달리 데이터 충돌이 발생하지 않음
- 데이터 링크 계층에서 동작
#### `MAC 주소 테이블`
- 브리지 테이블
- 스위치 내부에 존재
- 스위치의 **포트 번호**와 해당 포트에 연결된 컴퓨터의 **MAC 주소**가 등록되는 데이터베이스
#### `MAC 주소 학습 기능`
- 프레임 데이터가 전송되면 MAC 주소 테이블을 확인함
- `출발지의 MAC 주소`가 미등록 상태이면 MAC 주소와 포트를 등록함
- 허브에는 없는 기능
#### 플러딩
- 스위치가 수신 포트 이외에 모든 포트에서 데이터를 송신하는 것
#### 맥 주소 필터링
- 맥 주소를 기준으로 출발지를 선택하는 것

## 데이터가 케이블에서 충돌하지 않는 구조
### 전이중 통신
- 데이터의 송수신을 `동시에` 통신하는 방식
- 데이터를 동시에 전송해도 `충돌`이 발생하지 않음
- 컴퓨터를 직접 랜 케이블로 연결함
### 반이중 통신
- 회선 하나로 송수신을 `번갈아가면서` 통신하는 방식
- 허브 : 데이터를 동시에 전송하면 `충돌`이 발생함
- 스위치 : `충돌`이 발생하지 않음, 효율이 높음

## 충돌 도메인
- 충돌이 발생할 때 그 영향이 미치는 범위
- 허브 : 접속된 모든 컴퓨터에 영향을 미침
- 스위치 : 접속된 모든 컴퓨터에 영향을 미치지 않음